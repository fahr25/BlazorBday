@using BlazorBday.Models

<div class="card h-100">
    @if (!string.IsNullOrEmpty(Product.Image))
    {
        <img src="@Product.Image" class="card-img-top" alt="@Product.Name" style="height: 200px; object-fit: contain; padding: 10px;">
    }
    else
    {
        <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 200px;">
            <span class="text-muted">No Image</span>
        </div>
    }
    <div class="card-body">
        <h5 class="card-title">@Product.Name</h5>
        <p class="card-text">@Product.Description</p>
        @if (Product.MinAge > 0 || Product.MaxAge > 0)
        {
            <p class="text-muted small">Age: @Product.MinAge-@Product.MaxAge</p>
        }
        <p class="text-primary fw-bold">@Product.Points points</p>
        <p class="text-muted small">In stock: @Product.Inventory</p>
    </div>
    <div class="card-footer">
        <button type="button"
                class="btn btn-primary w-100"
                @onclick="HandleSelect"
                disabled="@IsDisabled">
            @ButtonText
        </button>
    </div>
</div>

@code {
    [Parameter, EditorRequired]
    public Product Product { get; set; } = null!;

    [Parameter]
    public EventCallback<Product> OnSelect { get; set; }

    [Parameter]
    public bool IsDisabled { get; set; }

    [Parameter]
    public string ButtonText { get; set; } = "Select";

    private async Task HandleSelect()
    {
        if (OnSelect.HasDelegate)
        {
            await OnSelect.InvokeAsync(Product);
        }
    }
}
