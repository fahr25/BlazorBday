@page "/shop/books"

@using BlazorBday.Models

@inject HttpClient HttpClient
@inject NavigationManager NavigationManager

<PageTitle>Shop - Birthday books</PageTitle>

<h1>Birthday books</h1>


<div class="container py-5">
   <div class="row mb-lg-4">

      @foreach (var book in books)
      {
         <div class="col-6 col-lg-3 mb-4">
            <div class="book shadow border-0 h-100">
               <img src="@book.Image" class="book-img-top" alt="@book.Name" style="height: 200px; object-fit: cover;" />

               <div class="book-body p-4">
                  <div class="lc-block text-center mb-3">
                     <div editable="rich">
                        <h3 class="fw-light">@book.Name</h3>
                     </div>
                  </div>

                  <div class="lc-block text-center mb-4">
                     <div editable="rich">
                        <p class="text-muted">@book.Description</p>
                     </div>
                  </div>

                  <div class="lc-block text-center">
                     <p class="fw-bold mb-0">Points: @book.Points</p>
                  </div>

                  <button class="btn btn-outline-danger mt-4">Add to Cart</button>
               </div>
            </div>
         </div>
      }
   </div>
</div> 

<PointsCart></PointsCart>


@code {
    List<Book> books = new();

    protected override async Task OnInitializedAsync()
    {
        // TODO: Add error handling
        books = await HttpClient.GetFromJsonAsync<List<Book>>(NavigationManager.BaseUri + "api/marketshop/books");
    }
}